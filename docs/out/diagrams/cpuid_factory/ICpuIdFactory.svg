<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="366px" preserveAspectRatio="none" style="width:804px;height:366px;background:#FFFFFF;" version="1.1" viewBox="0 0 804 366" width="804px" zoomAndPan="magnify"><defs/><g><!--MD5=[15faab5924118989e3daca4f4203be56]
class ICpuIdFactory--><g id="elem_ICpuIdFactory"><rect codeLine="2" fill="#F1F1F1" height="80.5938" id="ICpuIdFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="319" x="432" y="7"/><ellipse cx="539.25" cy="23" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M539.3594,18.3438 L538.2031,23.4219 L540.5313,23.4219 L539.3594,18.3438 Z M537.875,16.1094 L540.8594,16.1094 L544.2188,28.5 L541.7656,28.5 L541,25.4375 L537.7188,25.4375 L536.9688,28.5 L534.5313,28.5 L537.875,16.1094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="96" x="559.75" y="27.8467">ICpuIdFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="433" x2="750" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="433" x2="750" y1="47" y2="47"/><ellipse cx="443" cy="60.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="293" x="452" y="63.9951">create(cpunum: int) : unique_ptr&lt;ICpuId&gt;</text><ellipse cx="443" cy="76.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="452" y="80.292">~ICpuIdFactory() = default</text></g><!--MD5=[e869235eb923f7c6906b118fc744eb5d]
class Global--><g id="elem_Global"><rect codeLine="7" fill="#F1F1F1" height="88.8594" id="Global" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="331" x="7" y="152"/><ellipse cx="129.75" cy="172.1328" fill="#FF7700" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M130.9844,175.8984 L130.9844,173.5234 L129.3125,173.5234 L129.3125,171.4609 L133.125,171.4609 L133.125,177.1484 Q132.4219,177.7578 131.5625,178.0703 Q130.7188,178.3672 129.75,178.3672 Q127.3438,178.3672 126.0313,176.6953 Q124.7188,175.0234 124.7188,171.9453 Q124.7188,168.8203 126.0469,167.1641 Q127.375,165.5078 129.875,165.5078 Q130.6094,165.5078 131.3281,165.7266 Q132.0625,165.9453 132.6875,166.3359 L132.6875,169.0547 Q132.1719,168.3828 131.5,168.0547 Q130.8438,167.7109 130.0469,167.7109 Q128.6406,167.7109 127.9531,168.7734 Q127.2656,169.8203 127.2656,171.9453 Q127.2656,174.0078 127.9219,175.1016 Q128.5938,176.1797 129.875,176.1797 Q130.25,176.1797 130.5313,176.1172 Q130.8125,176.0391 130.9844,175.8984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="81" x="148.25" y="168.1387">«global free»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="186.75" y="183.9639"> </text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="337" y1="192.2656" y2="192.2656"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="337" y1="200.2656" y2="200.2656"/><ellipse cx="18" cy="222.0625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="305" x="27" y="217.2607">CreateCpuIdFactory(config: const Config&amp;) :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223" x="43" y="233.5576">std::unique_ptr&lt;ICpuIdFactory&gt;</text></g><!--MD5=[9f2d108cd9a97071672628d56d5c7e16]
class CpuIdFactoryWithCallback--><g id="elem_CpuIdFactoryWithCallback"><rect codeLine="11" fill="#F1F1F1" height="80.5938" id="CpuIdFactoryWithCallback" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="404" x="389.5" y="156"/><ellipse cx="444.25" cy="172" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M447.2188,177.6406 Q446.6406,177.9375 446,178.0781 Q445.3594,178.2344 444.6563,178.2344 Q442.1563,178.2344 440.8281,176.5938 Q439.5156,174.9375 439.5156,171.8125 Q439.5156,168.6875 440.8281,167.0313 Q442.1563,165.375 444.6563,165.375 Q445.3594,165.375 446,165.5313 Q446.6563,165.6875 447.2188,165.9844 L447.2188,168.7031 Q446.5938,168.125 446,167.8594 Q445.4063,167.5781 444.7813,167.5781 Q443.4375,167.5781 442.75,168.6563 Q442.0625,169.7188 442.0625,171.8125 Q442.0625,173.9063 442.75,174.9844 Q443.4375,176.0469 444.7813,176.0469 Q445.4063,176.0469 446,175.7813 Q446.5938,175.5 447.2188,174.9219 L447.2188,177.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="464.75" y="176.8467">CpuIdFactoryWithCallback</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="107" x="689.5" y="153"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="105" x="690.5" y="165.1387">CreationCallback</text><line style="stroke:#181818;stroke-width:0.5;" x1="390.5" x2="792.5" y1="188" y2="188"/><line style="stroke:#181818;stroke-width:0.5;" x1="390.5" x2="792.5" y1="196" y2="196"/><ellipse cx="400.5" cy="209.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="378" x="409.5" y="212.9951">CpuIdFactoryWithCallback(callback: CreationCallback&amp;)</text><ellipse cx="400.5" cy="225.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="291" x="409.5" y="229.292">create(cpunum: int) : unique_ptr&lt;ICpuId&gt;</text></g><g id="elem_GMN5"><path d="M479.5,304 L479.5,359.3984 A0,0 0 0 0 479.5,359.3984 L703.5,359.3984 A0,0 0 0 0 703.5,359.3984 L703.5,314 L693.5,304 L595.5,304 L591.5,240.34 L587.5,304 L479.5,304 A0,0 0 0 0 479.5,304 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M693.5,304 L693.5,314 L703.5,314 L693.5,304 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="485.5" y="321.0669">The `create` method then uses</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="485.5" y="336.1997">the callback to instantiate the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="485.5" y="351.3325">`ICpuId` object.</text></g><!--MD5=[8c6847a153a3a9702e1063e3e95fe849]
reverse link ICpuIdFactory to CpuIdFactoryWithCallback--><g id="link_ICpuIdFactory_CpuIdFactoryWithCallback"><path codeLine="21" d="M591.5,108.39 C591.5,123 591.5,138.34 591.5,151.98 " fill="none" id="ICpuIdFactory-backto-CpuIdFactoryWithCallback" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="584.5,108.15,591.5,88.15,598.5,108.14,584.5,108.15" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[e22ec37f5888ee8e12f04b4faac8976c]
link Global to CpuIdFactoryWithCallback--><g id="link_Global_CpuIdFactoryWithCallback"><path codeLine="23" d="M339.5,220 C361.92,220 366.08,208 388.5,208 " fill="none" id="Global-to-CpuIdFactoryWithCallback" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="388.5,208,379.5,204,383.5,208,379.5,212,388.5,208" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[db9d04a17acb34fedfbeac20d7aac42b]
@startuml ICpuIdFactory

abstract class ICpuIdFactory {
    +{abstract} create(cpunum: int) : unique_ptr<ICpuId>
    +~ICpuIdFactory() = default
}

class " " as Global <<(G,#FF7700) global free>> {
    +CreateCpuIdFactory(config: const Config&) :\n    std::unique_ptr<ICpuIdFactory>
}

class CpuIdFactoryWithCallback<CreationCallback> {
    +CpuIdFactoryWithCallback(callback: CreationCallback&)
    +create(cpunum: int) : unique_ptr<ICpuId>
}
note bottom
    The `create` method then uses
    the callback to instantiate the
    `ICpuId` object.
end note

ICpuIdFactory <|.d. CpuIdFactoryWithCallback

Global::CreateCpuIdFactory -r-> CpuIdFactoryWithCallback::CpuIdFactoryWithCallback

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>